{% extends 'adminpanel\admin_basic.html' %}

{% load static %}

{% block content%}
<html>

<body>
    <div class="mt-2">
        <div class="row" style="height: 120vh;">
            <div class="col-md-2  d-none d-md-block" style="background-color: black;">
                <div class="selectable-list text-light d-flex justify-content-center">
                    <ul class="list-unstyled mt-5">
                        <li class="admin"><a class="item" href="/admin_c/dashboard/">Dashboard</a></li>
                        <li class="admin"><a class="item" href="/admin_c/users/">Users</a></li>
                        <li class="admin"><a class="item" href="/admin_c/products/">Product</a></li>
                        <li class="admin"><a class="item" href="/admin_c/category/">Category</a></li>
                        <li class="admin"><a class="item" href="/admin_c/coupen/">Coupons</a></li>
                        <li class="admin"><a class="item" href="/admin_c/ordermanagement/">Orders</a></li>
                        <li class="admin"><a class="item" href="/admin_c/bannermanagement/">Banners</a></li>
                        <li class="admin"><a class="item" href="/admin_c/dashboard/">Payments</a></li>
                        <!-- Add more list items as needed -->
                    </ul>
                </div>


            </div>
            <div class="col-md-10 col-10">
                <div class="border p-3">
                    {% for item in orders %}
                    <div class="font-weight-bold mt-3">
                        Order id: {{ details.order_id }}
                    </div>
                    <div class="d-flex justify-content-between mt-3">
                        <div class="row">
                            <div class="col-md-1 col-4" style="max-height: 100px; max-width: 100px;">
                                <img src="{{ item.variant.product.images.url }}" alt="" class="img-fluid">
                            </div>
                            <div class="col-md-2 col-8">
                                <p><strong>Size:</strong> {{ item.variant.size }}</p>
                                <p><strong>Color:</strong> {{ item.variant.color }}</p>
                            </div>
                            <div class="col-md-1 col-6">
                                <p><strong>Order Amount:</strong> {{ item.order_id.paid_amount }}</p>
                            </div>
                            <div class="col-md-1 col-6">
                                <p><strong>â‚¹ For each:</strong> {{ item.product_price }}</p>
                            </div>
                            <div class="col-md-1 col-4">
                                <p><strong>Quantity:</strong> {{ item.quandity }}</p>
                            </div>
                            <div class="col-md-1 col-12">
                                <p><strong>Status:</strong> {{ item.order_id.status }}</p>


                            </div>

                            <div class="col-md-2 col-12">
                                <p><strong>return_request:</strong> {{ item.return_request }}</p>
                            </div>

                            <div class="col-md-2 col-12">
                                <p><strong>return_accept:</strong> {{ item.return_accept }}</p>
                            </div>

                            <!-- <div class="col-md-1 col-12">
                                <p><strong>return_request:</strong> {{ item.return_request }}</p>
                            </div> -->

                            
                            
                        </div>
                    </div>
                    {% endfor %}
                    <div class="col-md-3 col-12">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title font-weight-bold text-decoration-underline">Order Status Management
                                </h5>
                                <form action="/admin_c/orderstatus/{{details.id}}" method="POST">
                                    <!-- Replace with your form action URL -->
                                    {% csrf_token %}
                                    <div class="form-group">
                                        <label for="status">Select Status:</label>
                                        <select class="form-control" name="status" id="status">
                                            <option value="{{ item.order_id.status }}">{{ item.order_id.status}}</option>
                                            {% for choice in status_choices %}
                                            {% if choice.0 != item.order_id.status %}
                                            <option value="{{ choice.1 }}">{{ choice.1 }}</option>
                                            {% endif %}
                                            {% endfor %}
                                        </select>
                                    </div>
                                    <button type="submit" class="btn btn-success">Save</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="font-weight-bold mt-3 text-danger">
                    Reson for request:
                </div>
                {% for item in orders %}
                {% if item.order_id.status == 'Return requested' %}
                <div class=" mt-3 border">
                    <div class="">
                        <div class="col-md-6 col-12">
                            <div><strong>Return order Note:</strong> {{ item.order_id.ordernote }}</div></span>
                        </div>
                    </div>
                </div>
                {%endif%}
                {% endfor %}
                <div class="font-weight-bold mt-3">
                    Address:
                </div>
                <div class=" mt-3 border">
                    <div class="">
                        <div class="col-md-6 col-12">
                            <div><strong>Customer Name:</strong> {{ details.address.first_name }} {{details.address.last_name }}</div></span>
                            <div><strong>Phone Number:</strong> {{ details.address.phonenumber }}</div>
                            <div><strong>Address:</strong> {{ details.address.address }}</div>
                            <div><strong>Town:</strong> {{ details.address.town }}</div>
                            <div><strong>Zip Code:</strong> {{ details.address.zip_code }}</div>
                            <div><strong>District:</strong> {{ details.address.district }}</div>
                        </div>
                    </div>
                </div>

                <div class="font-weight-bold mt-3">
                    User Details:
                </div>

                <div class=" mt-3 border">
                    <div class="">
                        <div class="col-md-6 col-12">
                            <div><strong>User Name:</strong> {{ details.user.first_name }} {{ details.user.lastname }}
                            </div></span>
                            <div><strong>Email id ::</strong> {{ details.user.email }}</div>
                            <div><strong>IP:</strong> {{ details.address.ip }}</div>
                            <!-- <div><strong>Town:</strong> {{ details.address.town }}</div>
                        <div><strong>Zip Code:</strong> {{ details.address.zip_code }}</div>
                        <div><strong>District:</strong> {{ details.address.district }}</div> -->
                        </div>
                    </div>
                </div>

                
            </div>

        </div>
    </div>

    <body>

</html>
{% endblock content%}